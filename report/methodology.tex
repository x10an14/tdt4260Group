\section{Methodology}

Hardware components must usually be designed within an area budget, and in order
to simulate realistic conditions, the implemented prefetchers are limited to a
maximum of 8KiB memory~\cite{guidelines}. The simulations are performed by the
M5 simulator available on the Kongull HPC cluster at NTNU.

Both prefetchers are implemented as described, and then simulated with different
configurations in order to seach for patterns and then optimize each prefetcher
to the benchmarks used.

\subsection{The M5 Simulator}
The M5 simulator used in our testing only utilizes a subset of its rich
feature set~\cite{user_doc}, due to the time limitation of this report. The simulator runs several of the SPEC CPU2000 benchmarks available on the
pfJudge course website~\cite{guidelines}. The benchmarks considered in this
report are; ``\emph{ammp}'', ``\emph{applu}'', ``\emph{apsi}'',
``\emph{art110}'', ``\emph{art470}'', ``\emph{bzip2\_graphic}'',
``\emph{bzip2\_program}'', ``\emph{bzip2\_source}'', ``\emph{galgel}'',
``\emph{swim}'', ``\emph{twolf}'' and ``\emph{wupwise}''.

It is important that the prefetcher performance is evaluated with a variety of
benchmarks representing typical applications. The mentioned benchmarks are
widely used and recognized. We also believe that the results give a proper
foundation for performance evaluation\footnote{For more information about the
benchmarks, please see \emph{www.spec.org}.}.

The prefetcher simulation scores reported in \ref{sec:res} are averages of the
the speed-up with the abovementioned benchmarks. The speed-up is a measure on how
much faster M5 runs (number of instructions per clock cycle) with one of our
prefetchers compared to no prefetching at all.

\todo[inline]{Needs more details? I don't know -C}

\subsection{TS Tests}

When testing the TS prefetcher, we vary both the \emph{distance} and the
\emph{degree} parameters it uses. The distances tested are in the range of 2 to
20, and the degree from 1 to 4.

The intention of testing the TS prefetcher, is to have a benchmark to compare
the DCPT prefetcher against. Hence, we use the averaged scores given by the
pfJudge website~\cite[Sec.~2.5]{guidelines} of this course when comparing
results.

\subsection{DCPT Tests}

When testing the DCPT prefetcher we vary the \emph{table size}, \emph{delta
size} and \emph{delta ring buffer size}. Initially, these parameters are set to

the optimal values found by
\todo[inline]{Fix the name of below reference. M. Jahre is not good enough}
M. Jahre\cite{dcpt}; table size 98, delta size 19 and ring buffer size 12.
Although these values are obtained with different benchmarks and with a maximum
4KiB prefetcher size, it is a reasonable starting point. The impact of each
parameter is then studied by keeping two of them constant while varying the
third.

Since our implementation has 8KiB available, double of M. Jahres \cite{dcpt}
has, we can exploit this by having larger tables, delta-sizes, and ring buffer
size. Our analysis will reveal wich parameter combinations that works best.

After this analysis we simulate with the optimal values of each parameter.

\todo[inline]{Explain your experimental setup\\
- Which simulator did you use?\\
- How have you extended the simulator?\\
- Which parameters did you use for your simulations? (aim: reproducibility)\\
- Which benchmarks did you use?\\
- Why did you chose these benchmarks?\\
$=>$ Important: should be realistic}
